@{
    ViewData["Title"] = "Maps Page";
}

<link rel="stylesheet" href="~/css/maps.css" />

<p>Select points from the drop-down lists or choose them on the map.</p>

<form class="form-inline mb-3">
    <label for="select1" class="col-form-label">Choose start point:</label>
    <select class="form-control ml-3" id="select1" style="width: 150px;" onchange="changeStartPoint(value)">
        <option value="-1" selected disabled hidden>Start point</option>
        @foreach (var point in ViewBag.Points)
        {
            <option value="@point.Id">@point.Name</option>
        }
    </select>

    <label for="select2" class="col-form-label ml-3">Choose end point:</label>
    <select class="form-control ml-3" id="select2" style="width: 150px;" onchange="changeEndPoint(value)">
        <option value="-1" selected disabled hidden>End point</option>
        @foreach (var point in ViewBag.Points)
        {
            <option value="@point.Id">@point.Name</option>
        }
    </select>

    <button type="button" class="btn btn-primary ml-3" onclick="getTheShortestPath()">Find the shortest path</button>
</form>

<div class="btn-group mb-3" role="group" aria-label="Basic example">
    @foreach (var map in ViewBag.Maps)
    {
        <button type="button" class="btn btn-secondary" onclick="chooseMap(@map.Id)">@map.Name</button>
    }
</div>


@foreach (var map in ViewBag.Maps)
{
    <div class="maps-container" id="map-container-@map.Id">
        <svg class="svg-container" id="svg-container-@map.Id">
            @{List<PointViewModel> points = ViewBag.Points;}
            @foreach (var point in points.Where(p => p.MapId == map.Id))
            {
                <circle cx="@point.X" cy="@point.Y" r="4" stroke="#000000" stroke-width="1.5" fill="#f5f7fa" 
                id="point-@point.Id" style="cursor: pointer;" data-toggle="tooltip" title="@point.Name" onclick="changePoints(@point.Id)"/>
            }
            <polyline points="" style="fill:none; stroke:#004085; stroke-width:2" id="line"></polyline>
        </svg>
        <img src="@map.Image" alt="" id="img-@map.Id">
    </div>
}


<script src="~/js/maps.js" asp-append-version="true"></script>
@section Scripts {
    <script>
        $(function () {
            $('[data-toggle="tooltip"]').tooltip()
        })
    </script>
}
